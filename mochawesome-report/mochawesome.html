<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:2,&quot;passes&quot;:0,&quot;pending&quot;:0,&quot;failures&quot;:2,&quot;start&quot;:&quot;2025-07-09T12:47:37.089Z&quot;,&quot;end&quot;:&quot;2025-07-09T12:47:37.726Z&quot;,&quot;duration&quot;:637,&quot;testsRegistered&quot;:2,&quot;passPercent&quot;:0,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;a41f1e28-383a-471c-82ab-083115f3abc8&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\SURAJ PATEL\\OneDrive\\Desktop\\BusinessGenAiBackend\\test\\complaintReply.test.js&quot;,&quot;file&quot;:&quot;\\test\\complaintReply.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c473246a-b5a5-48c1-b0ed-652ac7b3760b&quot;,&quot;title&quot;:&quot;Complaint Reply API&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\SURAJ PATEL\\OneDrive\\Desktop\\BusinessGenAiBackend\\test\\complaintReply.test.js&quot;,&quot;file&quot;:&quot;\\test\\complaintReply.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Complaint Reply API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint Reply API \&quot;before all\&quot; hook in \&quot;Complaint Reply API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:479,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Register and login a user\nawait request(app)\n  .post(&#x27;/api/users/register&#x27;)\n  .send({ name: &#x27;Complaint Reply User&#x27;, email: userEmail, password: &#x27;TestPassword123&#x27;, role:\&quot;admin\&quot; });\nconst res = await request(app)\n  .post(&#x27;/api/users/login&#x27;)\n  .send({ email: userEmail, password: &#x27;TestPassword123&#x27; });\ntoken = res.body.accessToken;\n// Raise a complaint to reply to\nconst complaintRes = await request(app)\n  .post(&#x27;/api/complaints/raise&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    orderId: &#x27;ORDER456&#x27;,\n    productType: &#x27;Books&#x27;,\n    description: &#x27;Pages missing in the book&#x27;,\n  });\ncomplaintId = complaintRes.body.complaint._id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e7d4791-2b4e-4181-b25c-c9f203b2f4d8&quot;,&quot;parentUUID&quot;:&quot;c473246a-b5a5-48c1-b0ed-652ac7b3760b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Complaint Reply API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Complaint Reply API \&quot;after all\&quot; hook in \&quot;Complaint Reply API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;if (process.env.NODE_ENV === &#x27;test&#x27;) {\n  await mongoose.connection.dropDatabase();\n  await mongoose.disconnect();\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7419b562-f7db-4645-94a8-12790d95b39a&quot;,&quot;parentUUID&quot;:&quot;c473246a-b5a5-48c1-b0ed-652ac7b3760b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a reply for a complaint&quot;,&quot;fullTitle&quot;:&quot;Complaint Reply API should create a reply for a complaint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .post(&#x27;/api/complaint-replies&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({\n    content: &#x27;We are sorry for the inconvenience. We will send a replacement.&#x27;,\n    complaintId,\n  });\nexpect(res.statusCode).to.be.oneOf([201, 200]);\nexpect(res.body).to.have.property(&#x27;success&#x27;, true);\nexpect(res.body).to.have.property(&#x27;reply&#x27;);\nexpect(res.body.reply).to.have.property(&#x27;content&#x27;);\nexpect(res.body.reply).to.have.property(&#x27;complaint&#x27;);\nreplyId = res.body.reply._id;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 404 to be one of [ 201, 200 ]&quot;,&quot;estack&quot;:&quot;AssertionError: expected 404 to be one of [ 201, 200 ]\n    at Context.&lt;anonymous&gt; (file:///C:/Users/SURAJ%20PATEL/OneDrive/Desktop/BusinessGenAiBackend/test/complaintReply.test.js:61:34)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)&quot;},&quot;uuid&quot;:&quot;f858ace4-2790-4669-8160-24a19fd1ff29&quot;,&quot;parentUUID&quot;:&quot;c473246a-b5a5-48c1-b0ed-652ac7b3760b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not create a reply with missing fields&quot;,&quot;fullTitle&quot;:&quot;Complaint Reply API should not create a reply with missing fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const res = await request(app)\n  .post(&#x27;/api/complaint-replies&#x27;)\n  .set(&#x27;Authorization&#x27;, `Bearer ${token}`)\n  .send({ content: &#x27;Missing complaintId&#x27; });\nexpect(res.statusCode).to.be.oneOf([400, 422]);\nexpect(res.body).to.have.property(&#x27;success&#x27;, false);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 404 to be one of [ 400, 422 ]&quot;,&quot;estack&quot;:&quot;AssertionError: expected 404 to be one of [ 400, 422 ]\n    at Context.&lt;anonymous&gt; (file:///C:/Users/SURAJ%20PATEL/OneDrive/Desktop/BusinessGenAiBackend/test/complaintReply.test.js:74:34)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)&quot;},&quot;uuid&quot;:&quot;81a483f0-0bba-4829-b5ab-43da46cc41c3&quot;,&quot;parentUUID&quot;:&quot;c473246a-b5a5-48c1-b0ed-652ac7b3760b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;f858ace4-2790-4669-8160-24a19fd1ff29&quot;,&quot;81a483f0-0bba-4829-b5ab-43da46cc41c3&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:48,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;11.7.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;BusinessGenAiBackend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\SURAJ PATEL\\OneDrive\\Desktop\\BusinessGenAiBackend\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\SURAJ PATEL\\OneDrive\\Desktop\\BusinessGenAiBackend\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>